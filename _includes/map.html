<div id="map"></div>
<script>
fetchInject([
  '{{ "/assets/js/vendor/leaflet.js" | relative_url }}',
  '{{ "/assets/js/vendor/leaflet-gesture-handling.js" | relative_url }}',
  '{{ "/assets/css/leaflet.css" | relative_url }}',
  '{{ "/assets/css/leaflet-gesture-handling.css" | relative_url }}',
]).then(() => {
  L.Icon.Default.imagePath = '/assets/images/leaflet/';

var map = L.map('map', { gestureHandling: true }).setView([43.578, 1.474], 13);

L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors. Map Marker by Molly Bramlet from the Noun Project'
}).addTo(map);

var customIcon = L.icon({
  iconUrl: '/2019/assets/images/leaflet/marker.svg',
  iconSize: [32, 80],
  popupAnchor: [0, -12],
  shadowUrl: '/2019/assets/images/leaflet/marker.svg',
  shadowSize: [0, 0]
});

const markerOptions = {
  icon: customIcon
};

const popupOptions = {
  icon: customIcon,
  autoClose: false,
  closeButton: false,
  closeOnEscapeKey: false,
  closeOnClick: false
};

L.marker([43.56285, 1.46920], markerOptions).addTo(map)
  .bindPopup('Le Catalyseur', popupOptions)
  .openPopup();

L.marker([43.59013, 1.45933], markerOptions).addTo(map)
  .bindPopup('Le jardin Monplaisir', popupOptions)
  .openPopup();

})
</script>
